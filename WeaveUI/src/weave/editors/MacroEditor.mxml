<?xml version="1.0" encoding="utf-8"?>
<ui:DraggablePanel xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:ui="weave.ui.*" layout="absolute"
				   width="400" height="400" title="Macro Editor">			
	<mx:HBox height="5%" width="100%" >
		<mx:Button label="Edit" width="33%" click="editEntry(event)"/>
		<mx:Button label="Delete" width="33%" click="deleteEntry(event)"/>
		<mx:Button label="Add" width="33%" click="newMacroEntry(event)"/>
	</mx:HBox>
	<ui:LinkableObjectList id="macroList" height="95%" y="{.05*this.height}" width="100%"
						   hashMap="{LinkableFunction.macros}">
		<mx:Script>
			<![CDATA[
				import mx.core.Application;
				import mx.managers.PopUpManager;
				
				import weave.api.core.ILinkableHashMap;
				import weave.core.LinkableFunction;
				
				protected function editEntry(event:MouseEvent):void
				{
					if(macroList.selectedIndex > -1)
					{
						var macroEditorWindow:MacroEditWindow = new MacroEditWindow();
						PopUpManager.addPopUp(macroEditorWindow, Application.application as Application);
						macroEditorWindow.restorePanel();
						macroEditorWindow.macroName = macroList.hashMap.getName(macroList.selectedItem as LinkableFunction);	
					}
					
				}

				protected function deleteEntry(event:MouseEvent):void
				{
					if( macroList.selectedIndex > -1)
					{
						LinkableFunction.macros.removeObject(macroList.hashMap.getName(macroList.selectedItem as LinkableFunction));
					}
				}
				
				protected function newMacroEntry(event:MouseEvent):void
				{
					var macroAddWindow:MacroAddWindow = new MacroAddWindow();
					PopUpManager.addPopUp(macroAddWindow, Application.application as Application);
					macroAddWindow.restorePanel();
				}
			]]>
		</mx:Script>
	</ui:LinkableObjectList>
</ui:DraggablePanel>